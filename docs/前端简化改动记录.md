# 前端简化改动记录

**日期：** 2026-02-17  
**目标：** 简化 UI，让老奶奶级别的用户也能轻松使用

---

## 改动总结

整个老师端前端按照「先预览，再修改」的思路重新设计。不再一上来就展示密密麻麻的可编辑表格，而是先展示干净、好看的卡片，用户看着对就直接发布，哪里不对再点进去改。

---

## 修改的文件

### 1. `types/index.ts` — 类型定义
- 新增 `StudentMessage` 类型（学生留言：id、concert_id、学生名、消息内容、时间、是否已读）
- `Concert` 类型新增可选字段：`zoom_url`、`audience_count`（观众人数）、`recording_url`（录像链接）
- 新增 `PerformerReview`（单个学生的 AI 评价）和 `ConcertReviewSummary`（整场音乐会的 AI 评价汇总）类型

### 2. `lib/mock-data.ts` — 假数据
- 新增 `mockUpcomingPerformances`（Easter Recital，已发布但还没演出的音乐会的学生数据）
- 新增 `mockPublishedPerformances`（Winter Concert，已经演完的音乐会的学生数据）
- 新增 `mockConcertReview` — 完整的 AI 评价假数据：整体评分 8.6/10、文字总评、亮点列表、每个学生的评分和评语
- 新增 `mockStudentMessages` — 3 条学生留言（2 条未读、1 条已读）
- 新增一个音乐会："Easter Recital 2026"（已发布、还没演出、线下）

### 3. `app/teacher/review/[id]/page.tsx` — 审核页（大改）

**改之前：** 7 列可编辑表格、左侧原始输入面板、红黄白三色置信度系统、拖拽排序、社交媒体弹窗、保存草稿/重新分析按钮。

**改之后：**
- **预览优先：** 每个学生是一张卡片，默认展示姓名、曲目、乐器、时长（只读）
- **按需编辑：** 点「✏️ Edit」卡片原地展开成编辑表单，改完点「✅ Save」收回去
- **顶部像节目单封面：** 音乐会标题、日期、场地居中展示
- **AI 提示条：** "🤖 AI organized 3 performers for you — please review"
- **缺失信息提醒：** 信息不全的卡片黄色边框 + "⚠️ Missing: Instrument, Email"
- **拖拽 + 按钮排序：** 卡片可拖拽（拖的时候变半透明，目标位置蓝色边框），↑↓ 按钮也保留
- **社交媒体分享：** TikTok / 小红书完整流程保留在弹窗里
- **发布检查简化：** 一个汇总条（"⚠️ 还有 1 个学生信息不完整" 或 "✅ 所有信息已完整"）

### 4. `app/teacher/create/page.tsx` — 创建音乐会页（简化）

**改之前：** 复杂表单，支持 PDF/图片/Excel/URL 上传和文字粘贴，radio 选线上线下，dropdown 选时长。

**改之后：**
- **时长：** 下拉菜单改成数字输入框，每次 +30 分钟跳一档，右边显示 "minutes"，也可以手动输任意数字
- **场地选择：** radio 按钮改成两个大按钮（"📍 In-Person" / "🌐 Online (Zoom)"）
- **节目单输入只保留 2 种方式：**
  - 📷 上传照片（选本地图片，有预览和删除）
  - 粘贴文字（大文本框，有示例 placeholder）
  - 中间用 "or paste text" 分隔线
- **去掉了：** PDF/Excel/CSV 上传、URL 输入、"Multimodal Input" 技术术语、拖拽文件区域
- **自动保存：** 改了内容 1 秒后自动存到浏览器本地，右上角短暂显示 "✓ Draft saved"。关掉浏览器下次回来自动恢复。提交后自动清除。

### 5. `app/teacher/concerts/page.tsx` — 我的音乐会列表（重构）

**改之前：** 单个列表，只有 REVIEWING 状态的能点进去。

**改之后：**
- **3 个 Tab：** "📝 In Progress" / "📅 Upcoming" / "✅ Past"
  - In Progress = 草稿 + AI 处理中 + 待审核（还没发布的）
  - Upcoming = 已发布但还没演出（可以编辑）
  - Past = 已发布且已经演完（只读）
- **老奶奶看得懂的标签：**
  - 草稿 → "Draft" / "Continue editing →"
  - 待审核 → "Ready to Review" / "Review AI results →"
  - 已发布未演出 → "Published" / "View & Edit →"
  - 已演完 → "Completed" / "View results →"
- **Tab 下面有小字说明：** "Not yet published"、"Published, not yet performed"、"Already performed"
- **Upcoming 额外信息：** 绿色提示 "📬 Students notified · You can still make changes" + 红色徽章 "💬 2 new messages"
- **Past 额外信息：** "👥 24 attendees · 🎥 Recording available"
- **鼠标悬停：** 卡片边框变蓝色

### 6. `app/teacher/concert/[id]/page.tsx` — 已发布音乐会详情页（新页面）

**根据时间展示完全不同的界面：**

**Upcoming 版本（可编辑）：**
- 顶部 "📅 Upcoming" 标签 + "✏️ Edit" 编辑音乐会信息按钮
- 绿色横幅："📬 Students have been notified · You can still make changes"
- 快速统计（学生人数、总时长）
- 可编辑的学生卡片（跟审核页同样的原地展开编辑模式）
- "+ Add" 添加学生按钮
- 💬 学生留言区：未读数量红色徽章、每条消息可点 "✓ Read"、"Mark all as read" 批量已读
- 编辑音乐会信息弹窗（标题、时间、时长、场地全部可改）
- 改完后弹窗问："📬 Changes Saved! Would you like to notify students?"（是/否）

**Past 版本（只读 + AI 评价）：**
- 顶部 "✅ Completed" 标签（没有编辑按钮）
- 音乐会总结：3 个统计卡片（学生数、观众数、总时长）
- 整体 AI 评分（⭐ 8.6/10）+ 文字总评
- 🌟 亮点列表
- 每个学生的卡片：姓名、曲目、乐器、AI 评分徽章、可展开的 AI 评语、"▶ Watch Recording" 按钮
- 链接区域（Zoom 链接、完整录像）
- 全页面没有任何编辑按钮

**两个版本共有的功能：**
- 📱 Share → TikTok / 小红书社交媒体弹窗（选平台 → AI 生成文案预览/编辑 → 复制并跳转）
- 📄 Export Program → 跳转到可打印的节目单页面

### 7. `app/teacher/concert/[id]/program/page.tsx` — 可打印节目单（新页面）

- 衬线字体（Georgia），像真正的音乐会节目单
- 居中排版："CONCERT PROGRAM" 标题、音乐会名（斜体）、日期、时间、场地
- 节目列表：曲目名（粗体）+ 演奏者 + 乐器 + 时长
- 点线分隔每个节目
- 底部：学生人数、总时长、Zoom 链接（如果是线上）、"Generated by MusicNBrain"
- 页面打开后自动弹出浏览器打印对话框
- 顶部蓝色工具栏："🖨 Print / Save as PDF" + "← Back"（打印时自动隐藏）

### 8. `app/student/schedule/page.tsx` — 学生日程页（增强）

- **新功能：留言给老师** — 每个 upcoming 演出卡片底部有 "💬 Something wrong? Message your teacher" 按钮
- 点开展开文本框，写完点 "Send 📨" 发送
- 发送后显示绿色确认："✅ You sent: ..."
- 可以对同一个演出发多条留言
- 字号和间距稍微加大，方便阅读

### 9. `components/shared.tsx` — 公共组件（没改）
- NavBar 和 StatusBadge 保持不变
- ConfidenceCell 还在但新的审核页已经不用了（后续可以清理）

---

## 新增的路由

| 路由 | 说明 |
|------|------|
| `/teacher/concert/[id]` | 已发布音乐会详情（未演出=可编辑，已演完=只读+AI 评价） |
| `/teacher/concert/[id]/program` | 可打印的 PDF 节目单 |

## 设计原则

1. **预览优先：** 默认展示成品效果，不对再改
2. **卡片 > 表格：** 竖排卡片替代密集的横排表格
3. **只有两种状态：** 「需要注意」（黄色）和「没问题」（绿色），不搞三色系统
4. **大按钮大字：** 按钮最小 48px 高，间距宽松
5. **渐进式展示：** 编辑表单默认隐藏，需要时才展开；详情可折叠
6. **自动保存：** 不需要手动点保存，localStorage 自动存
7. **时间感知 UI：** 同一个数据模型，未演出和已演完展示完全不同的界面
8. **学生发声：** 学生可以直接给老师发留言反馈问题
