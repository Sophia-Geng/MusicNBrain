# Sophiaï¼šéŸ³ä¹ä¼šç®¡ç†ç³»ç»Ÿ â€” è®¾è®¡æ–‡æ¡£

## 1. é¡¹ç›®èƒŒæ™¯

**é¡¹ç›®åç§°ï¼š** MusicNBrain Media Lab â€” 2026 æ˜¥å­£å®ä¹ é¡¹ç›®
**é¡¹ç›®è´Ÿè´£äººï¼š** Annieï¼ˆGoogle AI å›¢é˜Ÿè½¯ä»¶å·¥ç¨‹å¸ˆï¼‰
**é¡¾é—®ï¼š** Fengï¼ˆå®éªŒå®¤ä¸»ä»»ï¼‰

### å›¢é˜Ÿåˆ†å·¥

| æˆå‘˜ | è§’è‰² | ç”¨æˆ·æ•…äº‹ | è´Ÿè´£é¢†åŸŸ |
|------|------|----------|----------|
| **Sophia (Xieming)** | SWE å®ä¹ ï¼ˆNEUï¼‰ | US1: è€å¸ˆ - éŸ³ä¹ä¼šç»„ç»‡, US2: å­¦ç”Ÿ - æ¼”å‡ºæŸ¥è¯¢ | å…¨æµç¨‹åº”ç”¨ã€Web åº”ç”¨ã€èŠ‚ç›®å•ç”Ÿæˆ |
| **Zhanchao** | SWE å®ä¹ ï¼ˆNYUï¼‰ | US3: è€å¸ˆ - ç¤¾äº¤åª’ä½“æ¨å¹¿ | ç¤¾äº¤åª’ä½“é›†æˆï¼ˆTikTok / å°çº¢ä¹¦ MCPï¼‰ |
| **Chris** | SWE å®ä¹ ï¼ˆUCSDï¼‰ | US4: å­¦ç”Ÿ - çº¿ä¸ŠéŸ³ä¹ä¼šæ¼”å‡º | Zoom ä¼šè®®é›†æˆã€ä¼šè®®è‡ªåŠ¨åŒ– |
| **Mena** | æ•°æ®ç§‘å­¦å®ä¹ ï¼ˆColumbiaï¼‰ | US5: æœºå™¨äººè¯„å§” - è‡ªåŠ¨æ¼”å‡ºè¯„ä»· | å®æ—¶è§†é¢‘ç”Ÿæˆã€è™šæ‹Ÿå½¢è±¡ |

---

## 2. Sophia çš„èŒè´£èŒƒå›´

**è´Ÿè´£äººï¼š** Sophia (Xieming)
**è§’è‰²å®šä½ï¼š** å…¨æµç¨‹åº”ç”¨ â€” Web åº”ç”¨å¼€å‘ + éŸ³ä¹ä¼šèŠ‚ç›®å•ç”Ÿæˆ

### èŒè´£èŒƒå›´å†…
- Web æœåŠ¡å™¨ï¼ˆå‰ç«¯ UI + åç«¯ APIï¼‰â€” æ‰€æœ‰ç”¨æˆ·çš„ä¸­å¿ƒå¹³å°
- éŸ³ä¹ä¼šèŠ‚ç›®å•ç”Ÿæˆï¼ˆé€šè¿‡ MCP ç”Ÿæˆå¯æ‰“å°çš„ PDF èŠ‚ç›®å•ï¼‰
- æ•°æ®åº“è®¾è®¡ä¸å®ç°ï¼ˆSupabaseï¼‰
- éŸ³ä¹ä¼š CRUDã€å­¦ç”Ÿ/è€å¸ˆ/å®¶é•¿é—¨æˆ·ã€é€šçŸ¥ç³»ç»Ÿ
- ä¸å…¶ä»–å›¢é˜Ÿæˆå‘˜æ¨¡å—çš„é›†æˆæ¥å£

### èŒè´£èŒƒå›´å¤–ï¼ˆå…¶ä»–æˆå‘˜è´Ÿè´£ï¼‰
- ç¤¾äº¤åª’ä½“ MCPï¼ˆTikTok / å°çº¢ä¹¦ï¼‰â†’ **Zhanchao**
- Zoom ä¼šè®®è‡ªåŠ¨åŒ–ã€Bot è°ƒåº¦ã€WebRTC â†’ **Chris**
- å®æ—¶è™šæ‹Ÿå½¢è±¡ç”Ÿæˆã€è§†é¢‘ç”Ÿæˆ â†’ **Mena**

### å¾…ç¡®è®¤
- **AI Agent Backend (LLM)** â€” Sophia æ˜¯è°ƒç”¨æ–¹è¿˜æ˜¯å®ç°æ–¹ï¼Ÿéœ€åœ¨å›¢é˜Ÿä¼šè®®ä¸­ç¡®è®¤
- LLM è§£æèŠ‚ç›®å•çš„å…·ä½“åˆ†å·¥ï¼ˆSophia è´Ÿè´£ prompt + è°ƒç”¨ï¼Œè¿˜æ˜¯ä»…æ¶ˆè´¹å·²è§£ææ•°æ®ï¼Ÿï¼‰

### é›†æˆå…³ç³»å›¾
```
              Sophia çš„ Web åº”ç”¨ï¼ˆä¸­å¿ƒæ¢çº½ï¼‰
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          â”‚              â”‚
    Zhanchao      Chris          Mena
    ç¤¾äº¤åª’ä½“      Zoom ä¼šè®®      è§†é¢‘ç”Ÿæˆ
    MCP           Bot/WebRTC     è™šæ‹Ÿå½¢è±¡
    (US3)         (US4)          (US5)
```
Sophia æä¾› Web å¹³å°å’Œ APIï¼Œå…¶ä»–æˆå‘˜çš„æ¨¡å—æ¥å…¥è¿™ä¸ªå¹³å°ã€‚

---

## 3. ç”¨æˆ·æ•…äº‹

### ç”¨æˆ·æ•…äº‹ 1ï¼šè€å¸ˆ â€” éŸ³ä¹ä¼šç»„ç»‡

> ä½œä¸ºä¸€åéŸ³ä¹è€å¸ˆï¼Œæˆ‘å¸Œæœ›é€šè¿‡ä¸Šä¼ èŠ‚ç›®å•å’Œåœºåœ°ä¿¡æ¯æ¥ç»„ç»‡çº¿ä¸Š/çº¿ä¸‹éŸ³ä¹ä¼šï¼Œä»è€Œé«˜æ•ˆç®¡ç†æ¼”å‡ºå¹¶è‡ªåŠ¨ä¸ºå‚ä¸è€…ç”Ÿæˆä¼šè®®é“¾æ¥ã€‚

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] è€å¸ˆå¯ä»¥ä¸Šä¼ èŠ‚ç›®å•ï¼ˆCSV / é‚®ä»¶ / è‡ªç”±æ–‡æœ¬æ ¼å¼ï¼‰
- [ ] ç³»ç»Ÿä½¿ç”¨ AI å¤„ç†ä¸è§„åˆ™è¾“å…¥ï¼ˆLLM è§£æï¼‰
- [ ] è€å¸ˆå¯ä»¥å®¡æ ¸å’Œç¼–è¾‘ç»“æ„åŒ–æ•°æ®ï¼ˆHuman-in-the-loopï¼‰
- [ ] ç³»ç»Ÿä¸ºçº¿ä¸ŠéŸ³ä¹ä¼šç”Ÿæˆ Zoom é“¾æ¥
- [ ] è€å¸ˆå¯ä»¥å‘æ‰€æœ‰å‚ä¸è€…å‘é€é€šçŸ¥

### ç”¨æˆ·æ•…äº‹ 2ï¼šå­¦ç”Ÿ â€” æ¼”å‡ºæŸ¥è¯¢

> ä½œä¸ºä¸€åå­¦ç”Ÿæ¼”å¥è€…ï¼Œæˆ‘å¸Œæœ›èƒ½æ–¹ä¾¿åœ°æŸ¥è¯¢æˆ‘çš„æ¼”å‡ºæ—¶é—´å’Œåœºåœ°ä¿¡æ¯ï¼Œä»è€Œå‡†ç¡®çŸ¥é“ä½•æ—¶ä½•åœ°éœ€è¦æ¼”å‡ºã€‚

**éªŒæ”¶æ ‡å‡†ï¼š**
- [ ] å­¦ç”Ÿæ”¶åˆ°åŒ…å«è¯¦æƒ…çš„é‚®ä»¶é€šçŸ¥
- [ ] å­¦ç”Ÿå¯ä»¥ç™»å½•æŸ¥çœ‹æ¼”å‡ºæ—¥ç¨‹
- [ ] å­¦ç”Ÿå¯ä»¥çœ‹åˆ°ï¼šæ¼”å‡ºæ—¶é—´ã€æ›²ç›®åç§°ã€åœºåœ°ä¿¡æ¯
- [ ] å­¦ç”Ÿå¯ä»¥è®¿é—®çº¿ä¸ŠéŸ³ä¹ä¼šçš„ Zoom é“¾æ¥

---

## 4. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯ï¼ˆUIï¼‰                               â”‚
â”‚                                                                 â”‚
â”‚  è€å¸ˆä»ªè¡¨ç›˜               å­¦ç”Ÿé—¨æˆ·             å®¶é•¿è§†å›¾           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ä¸Šä¼  CSV/    â”‚        â”‚ æˆ‘çš„æ—¥ç¨‹    â”‚     â”‚ æŸ¥çœ‹ä¿¡æ¯  â”‚     â”‚
â”‚  â”‚ é‚®ä»¶æ–‡æœ¬     â”‚        â”‚ Zoom é“¾æ¥   â”‚     â”‚           â”‚     â”‚
â”‚  â”‚ å®¡æ ¸ & ç¼–è¾‘  â”‚        â”‚ åœºåœ°ä¿¡æ¯    â”‚     â”‚           â”‚     â”‚
â”‚  â”‚ å‘å¸ƒ         â”‚        â”‚             â”‚     â”‚           â”‚     â”‚
â”‚  â”‚ å‘é€é€šçŸ¥     â”‚        â”‚             â”‚     â”‚           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Web æœåŠ¡å™¨ï¼ˆåç«¯ï¼‰                            â”‚
â”‚                                                                 â”‚
â”‚  è®¤è¯æ¨¡å— â”€â”€â”€ éŸ³ä¹ä¼š CRUD â”€â”€â”€ é€šçŸ¥æœåŠ¡                           â”‚
â”‚     â”‚              â”‚                â”‚                           â”‚
â”‚     â”‚        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”‚                           â”‚
â”‚     â”‚        â”‚ AI Agent   â”‚        â”‚                           â”‚
â”‚     â”‚        â”‚ Backend    â”‚        â”‚                           â”‚
â”‚     â”‚        â”‚ (LLM API)  â”‚        â”‚                           â”‚
â”‚     â”‚        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚                           â”‚
â”‚     â”‚              â”‚                â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚                â”‚
 â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚Supabase â”‚  â”‚ Zoom API    â”‚  â”‚ é‚®ä»¶æœåŠ¡       â”‚
 â”‚  æ•°æ®åº“  â”‚  â”‚ (MCP/REST)  â”‚  â”‚ (SendGrid/SES) â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ ä¼šè®®ç®¡ç† &          â”‚
             â”‚ Bot è°ƒåº¦å™¨          â”‚
             â”‚ 1) åˆ›å»ºä¼šè®®         â”‚
             â”‚ 2) è®¢é˜…/æ³¨å†Œ       â”‚
             â”‚ 3) åˆ†å‘é“¾æ¥         â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ ¸å¿ƒæµç¨‹ â€” çŠ¶æ€æœº

```
è€å¸ˆä¸Šä¼  CSV/é‚®ä»¶/è‡ªç”±æ–‡æœ¬
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     AI è§£æ raw_program_input
  â”‚  PARSING  â”‚â”€â”€â”€â–º LLM æå–ï¼šå­¦ç”Ÿå§“åã€æ›²ç›®ã€é¡ºåº
  â”‚  (è§£æä¸­)  â”‚     å†™å…¥ Performances è¡¨ (is_confirmed=false)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     è€å¸ˆå®¡æ ¸ AI ç»“æœ
  â”‚ REVIEWING â”‚â”€â”€â”€â–º é»„è‰²é«˜äº® = AI çŒœæµ‹çš„ (is_confirmed=false)
  â”‚ (å®¡æ ¸ä¸­)   â”‚     è€å¸ˆç¼–è¾‘/ç¡®è®¤æ¯ä¸€è¡Œ
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     è€å¸ˆç‚¹å‡»ã€Œå‘å¸ƒã€
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼š
  â”‚ PUBLISHED â”‚â”€â”€â”€â–º 1) Zoom ä¼šè®®é“¾æ¥ï¼ˆå¦‚æœæ˜¯çº¿ä¸Šï¼‰
  â”‚ (å·²å‘å¸ƒ)   â”‚     2) æ¯ä¸ªèŠ‚ç›®çš„é¢„è®¡ä¸Šå°æ—¶é—´
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     3) å‘æ‰€æœ‰å‚ä¸è€…å‘é€é‚®ä»¶é€šçŸ¥
        â”‚
        â–¼
   å­¦ç”Ÿæ”¶åˆ°é‚®ä»¶ â†’ ç™»å½• â†’ æŸ¥çœ‹æ—¥ç¨‹
```

---

## 6. æ•°æ®åº“è®¾è®¡ï¼ˆDBML â€” å¯ç›´æ¥ç²˜è´´åˆ° dbdiagram.ioï¼‰

```dbml
// 1. ç”¨æˆ·è¡¨
Table Users {
  id int [pk, increment]
  email varchar(255) [unique, not null, note: 'ç”¨äºå‘é€šçŸ¥']
  password_hash char(64) [not null]
  full_name varchar(100) [not null]
  role varchar(20) [not null, note: 'TEACHER, STUDENT, PARENT']
  zoom_account_id varchar(100) [note: 'å¯é€‰']
  created_at datetime [default: `now()`]
}

// 2. éŸ³ä¹ä¼šè¡¨
Table Concerts {
  id int [pk, increment]
  teacher_id int [not null, note: 'åˆ›å»ºè€…']
  title varchar(200) [not null]
  type varchar(20) [not null, note: 'ONLINE / OFFLINE']
  raw_program_input text [note: 'è€å¸ˆä¸Šä¼ çš„åŸå§‹æ–‡æœ¬']
  status varchar(20) [default: 'PARSING', note: 'PARSING â†’ REVIEWING â†’ PUBLISHED']
  venue_address varchar(500) [note: 'çº¿ä¸‹åœ°å€']
  zoom_meeting_url varchar(500) [note: 'ç³»ç»Ÿç”Ÿæˆçš„Zoomé“¾æ¥']
  start_time datetime [not null]
  end_time datetime [note: 'ç»“æŸæ—¶é—´']
  created_at datetime [default: `now()`]
  updated_at datetime [default: `now()`, note: 'çŠ¶æ€å˜æ›´æ—¶æ›´æ–°']
}

// 3. èŠ‚ç›®è¡¨
Table Performances {
  id int [pk, increment]
  concert_id int [not null]
  student_user_id int [null, note: 'å…³è”ç”¨æˆ·IDï¼ˆå‘é€šçŸ¥ç”¨ï¼‰']
  student_name_text varchar(100) [not null, note: 'AIè§£æå‡ºçš„åå­—ï¼ˆå±•ç¤ºç”¨ï¼‰']
  piece_name varchar(200) [not null, note: 'æ›²ç›®åç§°']
  order_index int [not null, note: 'æ¼”å‡ºé¡ºåº 1,2,3...']
  estimated_duration int [note: 'é¢„è®¡æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰']
  estimated_start_time datetime [note: 'é¢„è®¡ä¸Šå°æ—¶é—´ï¼Œç³»ç»Ÿè‡ªåŠ¨è®¡ç®—']
  is_confirmed boolean [default: false, note: 'false=AIçŒœçš„ï¼ˆæ ‡é»„ï¼‰, true=è€å¸ˆç¡®è®¤è¿‡']
}

// 4. é€šçŸ¥è¡¨
Table Notifications {
  id int [pk, increment]
  concert_id int [not null]
  recipient_user_id int [not null]
  channel varchar(20) [default: 'EMAIL', note: 'EMAIL, SMS']
  status varchar(20) [default: 'PENDING', note: 'PENDING / SENT / FAILED']
  sent_at datetime [note: 'å®é™…å‘é€æ—¶é—´']
  created_at datetime [default: `now()`]
}

// è¡¨å…³ç³»
Ref: Users.id < Concerts.teacher_id        // ä¸€ä¸ªè€å¸ˆ â†’ å¤šä¸ªéŸ³ä¹ä¼š
Ref: Concerts.id < Performances.concert_id // ä¸€ä¸ªéŸ³ä¹ä¼š â†’ å¤šä¸ªèŠ‚ç›®
Ref: Users.id < Performances.student_user_id // ä¸€ä¸ªå­¦ç”Ÿ â†’ å¤šä¸ªèŠ‚ç›®ï¼ˆå¯ä¸ºç©ºï¼‰
Ref: Concerts.id < Notifications.concert_id  // ä¸€ä¸ªéŸ³ä¹ä¼š â†’ å¤šæ¡é€šçŸ¥
Ref: Users.id < Notifications.recipient_user_id // ä¸€ä¸ªç”¨æˆ· â†’ å¤šæ¡é€šçŸ¥
```

---

## 7. API è®¾è®¡

### 7.1 è®¤è¯

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/register` | æ³¨å†Œï¼ˆè€å¸ˆ/å­¦ç”Ÿ/å®¶é•¿ï¼‰ |
| POST | `/api/auth/login` | ç™»å½• â†’ è¿”å› JWT |
| GET | `/api/auth/me` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |

### 7.2 éŸ³ä¹ä¼šï¼ˆè€å¸ˆæ“ä½œï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/concerts` | åˆ›å»ºéŸ³ä¹ä¼š + ä¸Šä¼ åŸå§‹èŠ‚ç›®æ–‡æœ¬ |
| GET | `/api/concerts` | è·å–æˆ‘çš„éŸ³ä¹ä¼šåˆ—è¡¨ |
| GET | `/api/concerts/:id` | è·å–éŸ³ä¹ä¼šè¯¦æƒ… + èŠ‚ç›®åˆ—è¡¨ |
| PUT | `/api/concerts/:id` | æ›´æ–°éŸ³ä¹ä¼šä¿¡æ¯ |
| POST | `/api/concerts/:id/parse` | è§¦å‘ AI è§£æï¼ˆPARSING â†’ REVIEWINGï¼‰ |
| PUT | `/api/concerts/:id/publish` | å‘å¸ƒéŸ³ä¹ä¼šï¼ˆREVIEWING â†’ PUBLISHEDï¼‰ |
| POST | `/api/concerts/:id/notify` | å‘æ‰€æœ‰å‚ä¸è€…å‘é€é€šçŸ¥ |

### 7.3 èŠ‚ç›®ï¼ˆè€å¸ˆç¼–è¾‘ï¼Œå­¦ç”ŸæŸ¥çœ‹ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/concerts/:id/performances` | è·å–æŸéŸ³ä¹ä¼šçš„èŠ‚ç›®åˆ—è¡¨ |
| PUT | `/api/performances/:id` | è€å¸ˆç¼–è¾‘æŸä¸ªèŠ‚ç›® |
| PUT | `/api/performances/:id/confirm` | è€å¸ˆç¡®è®¤ AI è§£æç»“æœ |
| PUT | `/api/performances/batch-confirm` | æ‰¹é‡ç¡®è®¤æ‰€æœ‰èŠ‚ç›® |

### 7.4 å­¦ç”Ÿé—¨æˆ·

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/my/performances` | å­¦ç”ŸæŸ¥çœ‹è‡ªå·±çš„æ¼”å‡ºå®‰æ’ |
| GET | `/api/my/performances/:id` | å•ä¸ªæ¼”å‡ºè¯¦æƒ… + Zoom é“¾æ¥ |

### 7.5 Zoom é›†æˆ

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/zoom/create-meeting` | å†…éƒ¨è°ƒç”¨ï¼šä¸ºéŸ³ä¹ä¼šåˆ›å»º Zoom ä¼šè®® |
| GET | `/api/zoom/meeting/:id` | è·å–ä¼šè®®è¯¦æƒ… / åŠ å…¥é“¾æ¥ |

---

## 8. AI Agent Backend â€” LLM é›†æˆ

> âš ï¸ **å¾…ç¡®è®¤ï¼šè¿™éƒ¨åˆ†å¯èƒ½ä¸åœ¨ Sophia çš„èŒè´£èŒƒå›´å†…ã€‚å…ˆè®°å½•è®¾è®¡æ€è·¯ï¼Œå¾…å›¢é˜Ÿä¼šè®®ç¡®è®¤ AI Agent Backend çš„å½’å±åå†è°ƒæ•´ã€‚**

### 8.1 ç›®çš„

å°†è€å¸ˆçš„ä¸è§„åˆ™è¾“å…¥ï¼ˆCSVã€é‚®ä»¶æ­£æ–‡ã€è‡ªç”±æ–‡æœ¬ï¼‰è§£æä¸ºç»“æ„åŒ–çš„ `Performances` æ•°æ®ã€‚

### 8.2 è¾“å…¥/è¾“å‡ºçº¦å®š

```
è¾“å…¥ï¼ˆraw_program_inputï¼‰ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"Hi, here's the program for next Saturday's recital:

1. Tommy Chen - FÃ¼r Elise (Beethoven), about 4 min
2. Lisa Wang will play Clair de Lune by Debussy ~6min
3. Jack and Sarah - Piano duet, Hungarian Dance No.5
   probably 5 minutes
"

è¾“å‡ºï¼ˆç»“æ„åŒ– JSONï¼‰ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "performances": [
    {
      "order_index": 1,
      "student_name_text": "Tommy Chen",
      "piece_name": "FÃ¼r Elise (Beethoven)",
      "estimated_duration": 4,
      "confidence": 0.95
    },
    {
      "order_index": 2,
      "student_name_text": "Lisa Wang",
      "piece_name": "Clair de Lune (Debussy)",
      "estimated_duration": 6,
      "confidence": 0.92
    },
    {
      "order_index": 3,
      "student_name_text": "Jack & Sarah",
      "piece_name": "Hungarian Dance No.5 (Piano Duet)",
      "estimated_duration": 5,
      "confidence": 0.80
    }
  ]
}
```

### 8.3 ç½®ä¿¡åº¦ â†’ Human-in-the-loop

| ç½®ä¿¡åº¦ | UI å±•ç¤º | is_confirmed |
|--------|---------|--------------|
| â‰¥ 0.9 | æ­£å¸¸æ˜¾ç¤º | falseï¼ˆä»éœ€è€å¸ˆç¡®è®¤ï¼‰ |
| 0.7 - 0.9 | é»„è‰²é«˜äº® âš ï¸ | false |
| < 0.7 | çº¢è‰²é«˜äº® âŒ | false |

æ‰€æœ‰è¡Œåˆå§‹ä¸º `is_confirmed = false`ï¼Œè€å¸ˆå¿…é¡»å®¡æ ¸åæ‰èƒ½å‘å¸ƒã€‚

### 8.4 LLM Prompt ç­–ç•¥

```
System: You are a music program parser. Extract structured data from
        the teacher's input. Return ONLY valid JSON. For each entry,
        provide a confidence score (0-1) for your parsing accuracy.

        Fields to extract:
        - order_index (performance order)
        - student_name_text (performer name)
        - piece_name (song/piece title with composer if mentioned)
        - estimated_duration (in minutes, null if not mentioned)
```

---

## 9. é›†æˆæ¥å£

### 9.1 Sophia â†” Chrisï¼ˆZoom ä¼šè®®é›†æˆï¼‰

**æ¥å£æ–¹å¼ï¼š** éŸ³ä¹ä¼šå‘å¸ƒæ—¶ï¼ŒSophia çš„åç«¯è°ƒç”¨ Chris çš„ Zoom æ¨¡å—ã€‚

```
Sophiaï¼ˆWeb æœåŠ¡å™¨ï¼‰
    â”‚
    â”‚ POST /api/concerts/:id/publish
    â”‚   â†’ status = PUBLISHED
    â”‚   â†’ å¦‚æœ type == ONLINEï¼š
    â”‚       è°ƒç”¨ Chris çš„ Zoom æ¨¡å— â†’ è·å–ä¼šè®®é“¾æ¥
    â”‚       ä¿å­˜åˆ° concerts.zoom_meeting_url
    â”‚
    â”œâ”€â”€â–º [Chris] ä¼šè®®ç®¡ç† & Bot è°ƒåº¦å™¨
    â”‚    1) åˆ›å»º Zoom ä¼šè®®
    â”‚    2) æ³¨å†Œ Bot åŠ å…¥ä¼šè®®
    â”‚    3) åˆ†å‘ä¼šè®®é“¾æ¥
    â”‚
    â””â”€â”€â–º [Sophia] é€šçŸ¥æœåŠ¡
         â†’ å‘å­¦ç”Ÿå‘é€åŒ…å« Zoom é“¾æ¥ + æ—¥ç¨‹çš„é‚®ä»¶
```

**éœ€è¦ä¸ Chris ç¡®è®¤çš„æ¥å£çº¦å®šï¼š**
- API/MCP æ¥å£æ ¼å¼
- è¾“å…¥ï¼šéŸ³ä¹ä¼šæ ‡é¢˜ã€å¼€å§‹æ—¶é—´ã€æ—¶é•¿
- è¾“å‡ºï¼šzoom_meeting_urlã€meeting_id

### 9.2 Sophia â†” Menaï¼ˆå®æ—¶è§†é¢‘ç”Ÿæˆï¼‰

**æ¥å£æ–¹å¼ï¼š** Mena çš„è™šæ‹Ÿå½¢è±¡/è§†é¢‘æ¨¡å—é€šè¿‡ Chris çš„ WebRTC Bot è¿æ¥åˆ° Zoom ä¼šè®®ã€‚

```
Sophiaï¼ˆWeb æœåŠ¡å™¨ï¼‰
    â”‚
    â”‚ æä¾›éŸ³ä¹ä¼šæ•°æ® + æ¼”å‡ºæ—¥ç¨‹
    â”‚
    â””â”€â”€â–º [Mena] å®æ—¶è™šæ‹Ÿå½¢è±¡ç”Ÿæˆ
         â†’ æœºå™¨äººè¯„å§”è¯„ä»·æ¼”å‡ºï¼ˆUS5ï¼‰
         â†’ é€šè¿‡ Chris çš„ WebRTC Browser Bot è¿æ¥
         â†’ è·å– Zoom çš„éŸ³è§†é¢‘æµ
```

**éœ€è¦ä¸ Mena ç¡®è®¤çš„æ¥å£çº¦å®šï¼š**
- æ¼”å‡ºå…ƒæ•°æ® APIï¼ˆæ›²ç›®åç§°ã€å­¦ç”Ÿä¿¡æ¯ï¼‰
- è¯„ä»·ç»“æœå›å†™æ¥å£ï¼ˆæœªæ¥ï¼‰

### 9.3 Sophia â†” Zhanchaoï¼ˆç¤¾äº¤åª’ä½“é›†æˆï¼‰

**æ¥å£æ–¹å¼ï¼š** éŸ³ä¹ä¼šå‘å¸ƒåï¼ŒZhanchao çš„ç¤¾äº¤åª’ä½“ MCP è‡ªåŠ¨å‘å¸ƒå…¬å‘Šã€‚

```
Sophiaï¼ˆAI Agent Backendï¼‰
    â”‚
    â”‚ MCP è¿æ¥
    â”‚
    â””â”€â”€â–º [Zhanchao] ç¤¾äº¤åª’ä½“ MCP
         â†’ è‡ªåŠ¨å‘å¸ƒéŸ³ä¹ä¼šå…¬å‘Š
         â†’ TikTok / å°çº¢ä¹¦
```

**éœ€è¦ä¸ Zhanchao ç¡®è®¤çš„æ¥å£çº¦å®šï¼š**
- è§¦å‘æ¡ä»¶ï¼šéŸ³ä¹ä¼šçŠ¶æ€ â†’ PUBLISHED
- è¾“å…¥ï¼šéŸ³ä¹ä¼šæ ‡é¢˜ã€æ—¥æœŸã€åœºåœ°ã€èŠ‚ç›®æ‘˜è¦
- è¾“å‡ºï¼šç¤¾äº¤åª’ä½“å¸–å­é“¾æ¥

### 9.4 Sophia â†” èŠ‚ç›®å•ç”Ÿæˆï¼ˆPDFï¼‰

```
Sophiaï¼ˆWeb æœåŠ¡å™¨ï¼‰
    â”‚
    â”‚ MCP è¿æ¥
    â”‚
    â””â”€â”€â–º èŠ‚ç›®å•ç”ŸæˆæœåŠ¡
         â†’ ç”Ÿæˆå¯æ‰“å°çš„éŸ³ä¹ä¼šèŠ‚ç›®å• PDF
         â†’ å°† PDF é“¾æ¥é€šè¿‡é‚®ä»¶å‘é€ç»™å‚ä¸è€…
```

---

## 10. æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | é€‰æ‹©ç†ç”± |
|------|------|----------|
| å‰ç«¯ | React / Next.js | SSRã€è·¯ç”±ã€å¼€å‘æ•ˆç‡é«˜ |
| åç«¯ | Next.js API Routes / FastAPI | API å±‚ |
| æ•°æ®åº“ | Supabase (PostgreSQL) | å†…ç½®è®¤è¯ã€RLSã€å®æ—¶åŠŸèƒ½ |
| è®¤è¯ | Supabase Auth | å†…ç½® JWT æ–¹æ¡ˆ |
| LLM | Claude API / OpenAI | èŠ‚ç›®å•è§£æ |
| Zoom | Zoom API (OAuth) | åˆ›å»ºä¼šè®® |
| é‚®ä»¶ | SendGrid / AWS SES | å‘é€é€šçŸ¥ |
| éƒ¨ç½² | Vercel + Supabase | Serverless |

---

## 11. æ ¸å¿ƒé¡µé¢åŸå‹

### é¡µé¢ 1ï¼šè€å¸ˆ â€” ä¸Šä¼  & åˆ›å»ºéŸ³ä¹ä¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ åˆ›å»ºæ–°éŸ³ä¹ä¼š                              â”‚
â”‚                                              â”‚
â”‚  æ ‡é¢˜: [2026 å¤å­£éŸ³ä¹ä¼š               ]       â”‚
â”‚  ç±»å‹: (â—) çº¿ä¸Š  ( ) çº¿ä¸‹                     â”‚
â”‚  æ—¥æœŸ: [2026-03-15]  æ—¶é—´: [14:00]            â”‚
â”‚  åœºåœ°: [æ³¢å£«é¡¿éŸ³ä¹å… 123 å·            ]       â”‚
â”‚                                              â”‚
â”‚  èŠ‚ç›®å•:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ç²˜è´´ CSVã€é‚®ä»¶æ–‡æœ¬æˆ–ä»»æ„æ ¼å¼         â”‚    â”‚
â”‚  â”‚                                      â”‚    â”‚
â”‚  â”‚ 1. Tommy - è‡´çˆ±ä¸½ä¸, 4åˆ†é’Ÿ          â”‚    â”‚
â”‚  â”‚ 2. Lisa - æœˆå…‰ ~6åˆ†é’Ÿ               â”‚    â”‚
â”‚  â”‚ ...                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“ æˆ–ä¸Šä¼  CSV æ–‡ä»¶                           â”‚
â”‚                                              â”‚
â”‚  [ æäº¤å¹¶ç”¨ AI è§£æ ]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡µé¢ 2ï¼šè€å¸ˆ â€” å®¡æ ¸ AI è§£æç»“æœï¼ˆHuman-in-the-loopï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ å®¡æ ¸: 2026 å¤å­£éŸ³ä¹ä¼š             çŠ¶æ€: å®¡æ ¸ä¸­        â”‚
â”‚                                                          â”‚
â”‚  #  â”‚ å­¦ç”Ÿ        â”‚ æ›²ç›®               â”‚ æ—¶é•¿    â”‚ ç¡®è®¤  â”‚
â”‚  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ â”‚
â”‚  1  â”‚ Tommy Chen  â”‚ è‡´çˆ±ä¸½ä¸           â”‚ 4 åˆ†é’Ÿ  â”‚ [âœ“]  â”‚
â”‚  2  â”‚ Lisa Wang   â”‚ æœˆå…‰               â”‚ 6 åˆ†é’Ÿ  â”‚ [âœ“]  â”‚
â”‚  3  â”‚ âš ï¸ Jack..   â”‚ âš ï¸ åŒˆç‰™åˆ©èˆæ›²..    â”‚ 5 åˆ†é’Ÿ  â”‚ [ ]  â”‚
â”‚     â”‚ [ç¼–è¾‘ âœï¸]    â”‚ [ç¼–è¾‘ âœï¸]          â”‚ [ç¼–è¾‘]  â”‚      â”‚
â”‚                                                          â”‚
â”‚  âš ï¸ = AI ç½®ä¿¡åº¦ < 90%ï¼Œè¯·æ ¸å®                              â”‚
â”‚                                                          â”‚
â”‚  [ å…¨éƒ¨ç¡®è®¤ ]  [ å‘å¸ƒéŸ³ä¹ä¼š ]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡µé¢ 3ï¼šå­¦ç”Ÿ â€” æˆ‘çš„æ¼”å‡º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ æˆ‘çš„æ¼”å‡ºå®‰æ’                              â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“… 2026 å¤å­£éŸ³ä¹ä¼š                     â”‚  â”‚
â”‚  â”‚ ğŸ• 3æœˆ15æ—¥ ä¸‹åˆ2:00 â€” ä½ çš„æ—¶æ®µ: 2:10   â”‚  â”‚
â”‚  â”‚ ğŸ¹ è‡´çˆ±ä¸½ä¸ï¼ˆè´å¤šèŠ¬ï¼‰                  â”‚  â”‚
â”‚  â”‚ ğŸ“ æ³¢å£«é¡¿éŸ³ä¹å… 123 å·                 â”‚  â”‚
â”‚  â”‚ ğŸ’» Zoom é“¾æ¥: https://zoom.us/j/xxx   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  ï¼ˆæš‚æ— æ›´å¤šæ¼”å‡ºå®‰æ’ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. äº¤ä»˜ç‰©æ¸…å•

| # | äº¤ä»˜ç‰© | æ ¼å¼ | çŠ¶æ€ |
|---|--------|------|------|
| 1 | æ•°æ®åº“ Schema (DBML) | `.dbml` | âœ… å·²å®Œæˆ |
| 2 | ç³»ç»Ÿæ¶æ„å›¾ | å›¾ç‰‡ / Draw.io | âœ… å·²å®Œæˆï¼ˆå›¢é˜Ÿï¼‰ |
| 3 | API æ¥å£è§„èŒƒ | æœ¬æ–‡æ¡£ Â§7 | âœ… å·²å®Œæˆ |
| 4 | AI Prompt æ¨¡æ¿ | æœ¬æ–‡æ¡£ Â§8 | âš ï¸ å¾…ç¡®è®¤æ˜¯å¦åœ¨ Sophia èŒè´£å†… |
| 5 | UI é¡µé¢åŸå‹ | æœ¬æ–‡æ¡£ Â§11 | âœ… å·²å®Œæˆ |
| 6 | çŠ¶æ€æœºæµç¨‹å›¾ | æœ¬æ–‡æ¡£ Â§5 | âœ… å·²å®Œæˆ |
